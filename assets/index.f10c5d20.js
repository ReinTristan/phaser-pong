import{p as l,W as S}from"./vendor.8d5ebd10.js";const m=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const y of o.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};m();class P extends l.exports.Loader.File{constructor(e,t,i="google"){super(e,{type:"webfont",key:t.toString()});this.fontNames=Array.isArray(t)?t:[t],this.service=i}load(){const e={active:()=>{this.loader.nextFile(this,!0)}};switch(this.service){case"google":e.google={families:this.fontNames};break;default:throw new Error("Unsupported font service")}S.load(e)}}const f="title",p="game",c="gameBackground",g="game-over",d='"Press Start 2P"',u="pong-beeb",b="pongo-plop";class x extends l.exports.Scene{preload(){const e=new P(this.load,"Press Start 2P");this.load.addFile(e),this.load.audio(u,"assets/pong-beep.ogg"),this.load.audio(b,"assets/pong-plop.ogg")}create(){this.add.text(400,200,"Old School Tennis",{fontSize:38,fontFamily:d}).setOrigin(.5,.5),this.add.text(400,300,"Press Space to Start",{fontFamily:d}).setOrigin(.5,.5),this.space=this.input.keyboard.once("keydown-SPACE",()=>{this.sound.play(u),this.scene.start(p)})}update(){}}const n=16777215,a={running:"running",PlayerWon:"player-won",AiWon:"ai-Won"};class w extends l.exports.Scene{init(){this.gameState=a.running,this.paddleRightVelocity=new l.exports.Math.Vector2(0,0),this.leftScore=0,this.rightScore=0,this.pause=!1}preload(){}create(){this.scene.run(c),this.scene.sendToBack(c),this.physics.world.setBounds(-100,0,1e3,600),this.ball=this.add.circle(400,300,10,n,1),this.physics.add.existing(this.ball),this.ball.body.setCircle(10),this.ball.body.setBounce(1,1),this.ball.body.setMaxVelocity(400),this.ball.body.setCollideWorldBounds(!0,1,1),this.ball.body.onWorldBounds=!0,this.leftPaddle=this.add.rectangle(50,300,30,100,n,1),this.rightPaddle=this.add.rectangle(750,300,30,100,n,1),this.physics.add.existing(this.leftPaddle,!0),this.physics.add.existing(this.rightPaddle,!0),this.physics.add.collider(this.leftPaddle,this.ball,this.handlePaddleBallCollision,void 0,this),this.physics.add.collider(this.rightPaddle,this.ball,this.handlePaddleBallCollision,void 0,this),this.physics.world.on("worldbounds",this.handleBallWorldBoundsCollision,this);const e={fontSize:48,fontFamily:d};this.leftScoreLabel=this.add.text(300,125,"0",e).setOrigin(.5,.5),this.rightScoreLabel=this.add.text(500,125,"0",e).setOrigin(.5,.5),this.cursors=this.input.keyboard.createCursorKeys(),this.time.delayedCall(1500,()=>{this.resetBall()})}update(){this.pause||this.gameState!==a.running||(this.playerMov(),this.updateAI(),this.checkScore())}handlePaddleBallCollision(e,t){this.sound.play(u);const i=this.ball.body.velocity;i.x*=1.5,i.y*=1.5,this.ball.body.setVelocity(i.x,i.y)}handleBallWorldBoundsCollision(e,t,i,s,o){s||o||this.sound.play(b)}playerMov(){const e=this.leftPaddle.body;this.cursors.up.isDown?(this.leftPaddle.y-=10,e.updateFromGameObject()):this.cursors.down.isDown&&(this.leftPaddle.y+=10,e.updateFromGameObject())}updateAI(){const e=this.ball.y-this.rightPaddle.y;if(l.exports.Math.abs(e)<10)return;const t=3;e<0?(this.paddleRightVelocity.y=-t,this.paddleRightVelocity.y<-10&&(this.paddleRightVelocity.y=-10)):e>0&&(this.paddleRightVelocity.y=t,this.paddleRightVelocity.y>10&&(this.paddleRightVelocity.y=10)),this.rightPaddle.y+=this.paddleRightVelocity.y,this.rightPaddle.body.updateFromGameObject()}checkScore(){const e=this.ball.x,t=-30,i=830;if(e>=t&&i>=e)return;e<-t?this.incrementRightScore():e>i&&this.incrementLeftScore();const s=7;this.leftScore>=s?this.gameState=a.PlayerWon:this.rightScore>=s&&(this.gameState=a.AiWon),this.gameState===a.running?this.resetBall():(this.ball.active=!1,this.physics.world.remove(this.ball.body),this.scene.stop(c),this.scene.start(g,{leftScore:this.leftScore,rightScore:this.rightScore}))}incrementLeftScore(){this.leftScore++,this.leftScoreLabel.text=this.leftScore}incrementRightScore(){this.rightScore++,this.rightScoreLabel.text=this.rightScore}resetBall(){this.ball.setPosition(400,300);let e=Phaser.Math.Between(0,360);const t=this.physics.velocityFromAngle(e,200);this.ball.body.setVelocity(t.x,t.y)}}class B extends l.exports.Scene{create(){this.add.line(400,300,0,0,0,600,n,1).setLineWidth(2.5,2.5),this.add.arc(400,300,50).setStrokeStyle(5,n,1)}}class v extends l.exports.Scene{create(e){let t="Game Over";e.leftScore>e.rightScore&&(t="You win!"),this.add.text(400,200,t,{fontFamily:d,fontSize:38}).setOrigin(.5,.5),this.add.text(400,400,"Press space to continue",{fontFamily:d,fontSize:20}).setOrigin(.5,.5),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.start(f)})}}const O=document.querySelector("main"),F={width:800,height:600,type:Phaser.AUTO,physics:{default:"arcade",arcade:{gravity:{y:0}}},parent:O},h=new l.exports.Game(F);h.scene.add(f,x);h.scene.add(p,w);h.scene.add(c,B);h.scene.add(g,v);h.scene.start("title");
